---
title: '16638 - ê´„í˜¸ ì¶”ê°€í•˜ê¸° 2'
eng_title: '16638 - ê´„í˜¸ ì¶”ê°€í•˜ê¸° 2'
image: https://til.qriosity.dev/img/m_banner_background.jpg
sidebar_label: '16638 - ê´„í˜¸ ì¶”ê°€í•˜ê¸° 2'
sidebar_position: 16638
created_date: 2025-04-30
---

# 16638 - ê´„í˜¸ ì¶”ê°€í•˜ê¸° 2

:::info

- **ë¬¸ì œ ë³´ê¸°**: [16638 - ê´„í˜¸ ì¶”ê°€í•˜ê¸° 2](https://www.acmicpc.net/problem/16638)
- **ì†Œìš” ì‹œê°„**: ğŸ’¥**1ì‹œê°„ ì´ˆê³¼**
- **í’€ì´ ì–¸ì–´**: `java`
- **ì²´ê° ë‚œì´ë„**: 4ï¸âƒ£
- **ë¦¬ë·° íšŸìˆ˜**: âœ…

:::

<br />

### í’€ì´ í‚¤ì›Œë“œ

<details>
<summary>ìŠ¤í¬ì£¼ì˜</summary>

`êµ¬í˜„` `ë¹„íŠ¸ë§ˆìŠ¤í‚¹`

</details>

<br />

### í’€ì´ ì½”ë“œ

:::info

- **ë©”ëª¨ë¦¬**: 14516 KB
- **ì‹œê°„**: 120 ms

:::

```java
import java.io.*;
import java.util.*;
import java.util.stream.*;

public class Main {
    static int n;
    static String eq;
    static long ans = Long.MIN_VALUE;
    
    public static void main(String[] args) throws IOException {
        input();
        
        for (int bit = 0; bit < (1 << n); ++bit) {
            if ((bit & (bit << 1)) != 0) continue; // check if overlapping

            List<Character> charList = eq.chars().mapToObj(i->(char)i).collect(Collectors.toList());

            // insert in reverse order to keep index
            for (int i = n-1; i > -1; --i) {
                if ((bit & (1 << i)) != 0) { // if insertion position found
                    int ldx = i * 2;
                    int rdx = i * 2 + 3;
                    charList.add(rdx, ')');
                    charList.add(ldx, '(');
                }
            }

            StringBuilder expr = new StringBuilder();
            for (char ch : charList) {
                expr.append(ch);
            }
            long val = eval(expr.toString());
            ans = ans < val ? val : ans;
        }

        System.out.println(ans);
    }

    // calculate expression
    public static long eval(String expr) {
        Deque<Long> numQ = new ArrayDeque<>();
        Deque<Character> opQ = new ArrayDeque<>();
        
        int i = 0;
        while (i < expr.length()) {
            char ch = expr.charAt(i);
            
            if (Character.isDigit(ch)) { // if 0 ~ 9
                long num = 0;
                while (i < expr.length() && Character.isDigit(expr.charAt(i))) {
                    num = num*10 + (expr.charAt(i++)-'0');
                }
                numQ.push(num);
                continue;
            }
            else if (ch == '(') {
                opQ.push(ch);
            }
            else if (ch == ')') {
                while (opQ.peek() != '(') {
                    numQ.push(calc(opQ.pop(), numQ.pop(), numQ.pop()));
                }
                opQ.pop(); // remove '('
            }
            else if (ch == '+' || ch == '-' || ch == '*') {
                while (!opQ.isEmpty() && precedence(ch) <= precedence(opQ.peek())) {
                    numQ.push(calc(opQ.pop(), numQ.pop(), numQ.pop()));
                }
                opQ.push(ch);
            }
            
            ++i;
        }

        while (!opQ.isEmpty()) {
            numQ.push(calc(opQ.pop(), numQ.pop(), numQ.pop()));
        }

        return numQ.pop();
    }

    public static long calc(char op, long b, long a) {
        switch (op) {
            case '+': return a + b;
            case '-': return a - b;
            case '*': return a * b;
        }
        return 0;
    }

    public static int precedence(char op) {
        if (op == '+' || op == '-') return 1;
        if (op == '*') return 2;
        return 0;
    }
    
    public static void input() throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        n = Integer.parseInt(br.readLine());
        n >>= 1; // number of operators
        eq = br.readLine();
    }
}
```

<br />

### í’€ì´ í•´ì„¤

WIP

<br />

### ë©”ëª¨

- ì•„ì´ë””ì–´ë„ í•„ìš”í•˜ê³  ì•½ê°„ì˜ CS ì§€ì‹ë„ ìš”êµ¬í•˜ëŠ”, ë‚œì´ë„ ìˆëŠ” ë¬¸ì œ
- ìë°”ë„ íŒŒì´ì¬ì²˜ëŸ¼ ì„±ëŠ¥ ì´ìŠˆë¡œ `Stack` ëŒ€ì‹  `Deque` ì“°ëŠ” ê²ƒì´ ì¢‹ìŒ.