---
title: '19237 - ì–´ë¥¸ ìƒì–´'
eng_title: '19237 - ì–´ë¥¸ ìƒì–´'
image: https://til.qriosity.dev/img/m_banner_background.jpg
sidebar_label: '19237 - ì–´ë¥¸ ìƒì–´'
sidebar_position: 19237
created_date: 2025-04-16
---

# 19237 - ì–´ë¥¸ ìƒì–´

:::info

- **ë¬¸ì œ ë³´ê¸°**: [19237 - ì–´ë¥¸ ìƒì–´](https://www.acmicpc.net/problem/19237)
- **ì†Œìš” ì‹œê°„**: ğŸ’¥**1ì‹œê°„ ì´ˆê³¼**
- **í’€ì´ ì–¸ì–´**: `python`
- **ì²´ê° ë‚œì´ë„**: 4ï¸âƒ£
- **ë¦¬ë·° íšŸìˆ˜**: âœ…

:::

<br />

### í’€ì´ í‚¤ì›Œë“œ

<details>
<summary>ìŠ¤í¬ì£¼ì˜</summary>

`êµ¬í˜„`

</details>

<br />

### í’€ì´ ì½”ë“œ

:::info

- **ë©”ëª¨ë¦¬**: 33752 KB
- **ì‹œê°„**: 292 ms

:::

```python
import sys
from copy import deepcopy
input = sys.stdin.readline

n, m, k = 0, 0, 0
field = [] # ìƒì–´ ë§µ
smell = [] # ëƒ„ìƒˆ ë§µ
s_dir = [] # ìƒì–´ ë°©í–¥ ì •ë³´
s_pri = [] # ìƒì–´ ì´ë™ ìš°ì„ ìˆœìœ„ ì •ë³´
out = 0 # ì«“ê²¨ë‚œ ìƒì–´ ì¹´ìš´íŠ¸
dy = [-1, 1, 0, 0]
dx = [0, 0, -1, 1] # T B L R

def update_smell():
    global smell
    for y in range(n):
        for x in range(n):
            # ëƒ„ìƒˆ ìˆìœ¼ë©´ -1
            if smell[y][x][1] > 0:
                smell[y][x][1] -= 1
            # ìƒì–´ì˜ ìœ„ì¹˜ë©´ [ìƒì–´ë²ˆí˜¸, k]ë¡œ ê°±ì‹ 
            if field[y][x] != 0:
                smell[y][x] = [field[y][x], k]

def move():
    nfield = deepcopy(field) # ì´ë™ ê¸°ë¡ìš©. nì œê³± ìŠ¤ìº”ë•Œë¬¸ì— ë¶„ë¦¬í•´ì•¼ í•¨.
    global s_dir, out
    for y in range(n):
        for x in range(n):
            if field[y][x] == 0: # existence check
                continue
            
            # ìƒì–´ ìˆìœ¼ë©´
            sdx = field[y][x] - 1 # shark index
            d = s_dir[sdx] # 1 ~ 4
            moved = False
            
            #print('sdx:', sdx, '/ d:', d)
            
            # ëƒ„ìƒˆ ì—†ëŠ” ê³³ íƒìƒ‰
            # 4ë°©í–¥ì„ s_pri ìš°ì„ ìˆœìœ„ì— ë”°ë¼ ì²˜ë¦¬
            for nd in s_pri[sdx][d-1]: # 1 ~ 4
                ny = y + dy[nd-1]
                nx = x + dx[nd-1]
                #print('nd:', nd, '/ ny:', ny, '/ nx:', nx)
                
                if not (0 <= ny < n and 0 <= nx < n): # bound check
                    continue
                
                # ëƒ„ìƒˆ ì—†ëŠ” ê²½ìš°
                if smell[ny][nx][1] == 0:
                    if nfield[ny][nx] == 0: # ìƒì–´ë„ ì—†ìœ¼ë©´
                        nfield[ny][nx] = sdx + 1 # ë°”ë¡œ ì´ë™
                    else: # ìƒì–´ ìˆìœ¼ë©´
                        nfield[ny][nx] = min(nfield[ny][nx], sdx + 1) # ë” ì‘ì€ ìƒì–´ win
                        out += 1 # ìƒì–´ í•˜ë‚˜ out
                        #print('out')
                    
                    nfield[y][x] = 0 # ì´ë™ ì „ ìœ„ì¹˜ ì²˜ë¦¬
                    s_dir[sdx] = nd # ì´ë™ í›„ ë°©í–¥ ê°±ì‹ 
                    moved = True
                    break
            
            if moved: # ë‹¤ìŒ ìƒì–´ë¡œ ë„˜ì–´ê°€ê¸°
                continue
            
            # ì•„ì§ ì´ë™ ëª»í–ˆìœ¼ë©´ ë³¸ì¸ ëƒ„ìƒˆ íƒìƒ‰
            # 4ë°©í–¥ì„ s_pri ìš°ì„ ìˆœìœ„ì— ë”°ë¼ ì²˜ë¦¬
            for nd in s_pri[sdx][d-1]: # 1 ~ 4
                ny = y + dy[nd-1]
                nx = x + dx[nd-1]
                
                if not (0 <= ny < n and 0 <= nx < n):
                    continue
                
                if smell[ny][nx][0] == sdx + 1: # ìì‹ ì˜ ëƒ„ìƒˆë©´
                    s_dir[sdx] = nd # ë°©í–¥ ì—…ë°ì´íŠ¸
                    nfield[ny][nx] = field[y][x] # ì´ë™
                    nfield[y][x] = 0 # ì´ë™ ì „ ìœ„ì¹˜ ì²˜ë¦¬
                    break
    
    return nfield
                
def solution():
    global n, m, k, field, smell, s_dir, s_pri
    
    n, m, k = map(int, input().split())
    
    for _ in range(n):
        field.append(list(map(int, input().split())))
        smell.append([[0, 0] for _ in range(n)])
    
    s_dir = list(map(int, input().split()))
    
    for _ in range(m):
        lst = []
        for _ in range(4):
            lst.append(list(map(int, input().split())))
        s_pri.append(lst)
        
    # simulate
    for t in range(1, 1001):
        update_smell()
        
        # print(t)
        # for line in smell:
        #     print(line)
        
        field = move()
        
        #print()
        
        if out == m-1:
            print(t)
            return
    
    print(-1)


if __name__ == '__main__':
    solution()
```

<br />

### í’€ì´ í•´ì„¤

WIP

<br />

### ë©”ëª¨

- ì‚¼ì„± ë¬¸ì œ ì¢…íŠ¹ì¸ë° ì´ ë¬¸ì œì²˜ëŸ¼ for - if êµ¬í˜„ ìˆœì„œì™€ ì§€ë¬¸ì˜ ìˆœì„œê°€ ì¼ì¹˜í•˜ì§€ ì•Šì„ ë•Œê°€ ìˆìŒ.
    - ë¬¸ì œ êµ¬ì¡°í™” ëŠ¥ì§€ê°€ ë†’ì•„ì•¼ í•¨.
- (x, y) -> (y, x) ë¡œ ì•ë’¤ ë°”ê¾¸ì–´ êµ¬í˜„í•´ë„ ìƒê´€ì—†ëŠ” ë¬¸ì œì„. ë‚´ ì½”ë“œê°€ ê·¸ë ‡ê²Œ í’€ì—ˆìŒ.
- ì²˜ìŒ í‘¸ëŠ”ë° 2ì‹œê°„ ë°˜... ê±¸ë¦¼ (ë””ë²„ê¹… í¬í•¨)