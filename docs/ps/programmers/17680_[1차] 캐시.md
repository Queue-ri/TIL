---
title: '17680 - [1ì°¨] ìºì‹œ'
eng_title: '17680 - [1ì°¨] ìºì‹œ'
slug: '/ps/programmers/17680_ìºì‹œ'
image: https://til.qriosity.dev/img/m_banner_background.jpg
sidebar_label: '17680 - [1ì°¨] ìºì‹œ'
sidebar_position: 17680
created_date: 2025-06-03
---

# 17680 - [1ì°¨] ìºì‹œ

:::info

- **ë¬¸ì œ ë³´ê¸°**: [17680 - [1ì°¨] ìºì‹œ](https://school.programmers.co.kr/learn/courses/30/lessons/17680)
- **ì†Œìš” ì‹œê°„**: ğŸ’¥**1ì‹œê°„ ì´ˆê³¼**
- **í’€ì´ ì–¸ì–´**: `java`
- **ì²´ê° ë‚œì´ë„**: 3ï¸âƒ£
- **ë¦¬ë·° íšŸìˆ˜**: âœ…

:::

<br />

### í’€ì´ í‚¤ì›Œë“œ

<details>
<summary>ìŠ¤í¬ì£¼ì˜</summary>

`í•´ì‹œ`

</details>

<br />

### í’€ì´ ì½”ë“œ

:::info

- **ë©”ëª¨ë¦¬**: 91200 KB
- **ì‹œê°„**: 33 ms

:::

```java
import java.util.*;

class Solution {
    public int solution(int cacheSize, String[] cities) {
        Map<String, Boolean> cache = new LinkedHashMap<>(cacheSize+1, 1.0f, true);
        
        // simulate
        if (cacheSize == 0) return cities.length * 5; // corner case
        
        int ans = 0;
        for (int i = 0; i < cities.length; ++i) {
            String keyword = cities[i].toLowerCase();
            if (cache.containsKey(keyword)) { // cache hit
                cache.get(keyword); // trigger accessOrder
                ans += 1;
            }
            else { // cache miss
                if (cache.size() >= cacheSize) { // cache is full -> swap
                    // NoSuchElementException ì¡°ì‹¬
                    // corner case ì²˜ë¦¬ ì•ˆí•˜ë©´ NSEE ë°œìƒ
                    cache.remove(cache.keySet().iterator().next());
                }
                cache.put(keyword, true);
                ans += 5;
            }
        }
        
        return ans;
    }
}
```

<br />

### í’€ì´ í•´ì„¤

íŠ¹ì • ìë£Œêµ¬ì¡°ë¥¼ ì´ìš©í•˜ì—¬ LRUë¥¼ êµ¬í˜„í•˜ëŠ” ë¬¸ì œì´ë‹¤.

<br />

#### âŒ ìš°ì„ ìˆœìœ„ íëŠ” ì•ˆë¼ìš”

ì²˜ìŒì—” least recentë¥¼ pq ìš°ì„ ìˆœìœ„ë¡œ íŒë‹¨í•˜ë ¤ í–ˆëŠ”ë°,

pqëŠ” ì›ì†Œë¥¼ í•˜ë‚˜ êº¼ë‚´ì„œ keywordì¸ì§€ í™•ì¸ í›„ ì•„ë‹ˆë©´ ë‹¤ì‹œ ë„£ê³  ë‹¤ìŒ ì›ì†Œ êº¼ë‚´ëŠ” ê·¸ëŸ° ìš©ë„ë¡œ ì‚¬ìš©í•˜ê¸° ì–´ë µë‹¤.

ë‹¹ì—°íˆ, ì´ëŠ” FIFOê°€ ì•„ë‹ˆê¸° ë•Œë¬¸!

ì–´ë–»ê²Œë“  pqë¡œ í•´ê²°í•˜ê² ë‹¤ë©´ ì›ì†Œë¥¼ ë‹¤ êº¼ë‚´ì•¼ ë˜ëŠ”ë°<br />
ì–´ì°¨í”¼ pq ë§ê³ ë„ ëª©ì ì— ë§ëŠ” ìë£Œêµ¬ì¡°ê°€ ë”°ë¡œ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— êµ³ì´ ê·¸ëŸ´ í•„ìš”ê°€ ì—†ë‹¤.

<br />

#### â­â­â­ LinkedHashMapì„ í†µí•œ LRU êµ¬í˜„

LinkedHashMapì˜ `accessOrder`ë¥¼ ì‚¬ìš©í•˜ë©´ LRU êµ¬í˜„ì´ ì•„ì£¼ ì‰¬ì›Œì§„ë‹¤.

---

â­â­â­â­â­â­â­â­â­â­â­â­â­â­â­â­â­â­â­â­â­â­â­â­â­â­â­

accessOrderëŠ” ê¸°ë³¸ falseë¡œ, ì´ ê²½ìš° insertOrderë¡œ ì‘ë™í•œë‹¤.

- insertOrderëŠ” ì‚½ì…ëœ ìˆœì„œë¥¼ ë³´ì¥í•˜ê³  **(FIFO)**
- accessOrderëŠ” ì‚½ì…/ìˆ˜ì •/ì¡°íšŒ ìˆœì„œë¥¼ ë³´ì¥í•œë‹¤. **(LRU)**

ë”°ë¼ì„œ accessOrderë¥¼ trueë¡œ ì„¤ì •í•˜ê³  put() ë˜ëŠ” get()í•˜ë©´ ìë™ìœ¼ë¡œ LRUë¡œ ì‘ë™í•˜ëŠ” ê²ƒì´ë‹¤.

---

ë‹¤ë§Œ accessOrderê°€ ìƒì„±ìì˜ 3ë²ˆì§¸ ì¸ìë¼ì„œ, ìƒì„±ì‹œ ì¸ìë¥¼ ë‹¤ ì ì–´ì¤˜ì•¼ í•œë‹¤.

ìƒì„±ì ìŠ¤í™ì€ [Java SE 8 API docs](https://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashMap.html)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

<br />

```java
Map<String, Boolean> cache = new LinkedHashMap<>(cacheSize+1, 1.0f, true);
```

ê²°ê³¼ì ìœ¼ë¡œ ìƒë‹¨ê³¼ ê°™ì´ ìƒì„±í•˜ì˜€ëŠ”ë°, ì•½ê°„ ë¨¸ë¦¬ë¥¼ êµ´ë ¤ì„œ resizeê°€ ì¼ì–´ë‚˜ì§€ ì•Šë„ë¡ ì˜ë„í–ˆë‹¤.
- ì´ˆê¸° ì‚¬ì´ì¦ˆë¥¼ cacheSize + 1ë¡œ ì„¤ì •
- loadFactorë¥¼ 100%ë¡œ ì„¤ì •

êµ¬í˜„í•  LRU ë¡œì§ ìƒ LinkedHashMapì˜ sizeëŠ” `cacheSize`ë¥¼ ë„˜ì§€ ì•Šìœ¼ë¯€ë¡œ, resizeê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.

```java
if (cache.size() >= cacheSize) { // cache is full -> swap
    // NoSuchElementException ì¡°ì‹¬
    // corner case ì²˜ë¦¬ ì•ˆí•˜ë©´ NSEE ë°œìƒ
    cache.remove(cache.keySet().iterator().next());
}
```

ê·¸ë¦¬ê³  swapì´ í•„ìš”í• ë•Œ `keySet().iterator().next()`ë¥¼ í†µí•´ headë¥¼ ì°¾ì•„ì„œ ì œê±°í•œë‹¤.

headë‚˜ tail ì ‘ê·¼ë²•ì€ [ìŠ¤íƒì˜¤ë²„í”Œë¡œ](https://stackoverflow.com/questions/1936462/get-first-or-last-entry-of-a-linkedhashmap)ë¥¼ ì°¸ê³ í–ˆë‹¤.

<br />

### â­ ì¶”ê°€ ë ˆí¼ëŸ°ìŠ¤

ìë°”ì˜ HashMapê³¼ C++ì˜ mapì„ ë¹„êµí•˜ë‹¤ê°€ ë‚´ë¶€ êµ¬í˜„ì„ ì¢€ ì°¾ì•„ë´¤ëŠ”ë° ê°’ì§„ ë‚´ìš©ë“¤ì´ ë§ì•˜ë‹¤.

#### [Internal Working of HashMap in Java](https://www.geeksforgeeks.org/internal-working-of-hashmap-java/)
![](https://media.geeksforgeeks.org/wp-content/uploads/20250422164853068313/Internal-Working-of-HashMap-in-Java-.webp)

ìë°”ì˜ HashMapì€ Array í˜•íƒœì˜ ë²„í‚·ê³¼ ê° ì¸ë±ìŠ¤ì— ì—°ê²°ëœ LinkedListë¡œ êµ¬ì„±ëœë‹¤.

ì´ëŠ” í•´ì‹œ ì¶©ëŒì„ handlingí•˜ê¸° ìœ„í•¨ìœ¼ë¡œ, ìë°”ëŠ” [í•´ì‹œ ì¶©ëŒ ì „ëµ ì¤‘ **ì²´ì´ë‹**ì„ ì±„íƒ](https://jaehoney.tistory.com/169)í–ˆë‹¤.

ì°¸ê³ ë¡œ ìë°”ì˜ LinkedList êµ¬í˜„ì€ [Doubly Linked List](https://velog.io/@sweet_sumin/LinkedHashMap-%EB%82%B4%EB%B6%80-%EA%B5%AC%EC%A1%B0-%EC%82%B4%ED%8E%B4%EB%B4%A4%EC%96%B4)ì´ë‹¤.

<br />

#### ìë°” HashMapì˜ í•˜ì´ë¸Œë¦¬ë“œ êµ¬í˜„

![ì¶œì²˜: https://yongtapark95.tistory.com/77](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fc3bGol%2FbtsEx8RJkol%2FYRbswFGQX73ZZ70tAWGOJ1%2Fimg.png)

[ìŠ¤íƒì˜¤ë²„í”Œë¡œ](https://stackoverflow.com/questions/43911369/hashmap-java-8-implementation)ì— ì˜ê±°í•˜ë©´ ìë°”ì˜ HashMapì€ `TREEIFY_THRESHOLD` ìƒìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ [ì¶©ëŒ íšŸìˆ˜ê°€ ì„ê³„ì¹˜ ë„ë‹¬ ì‹œ do-whileì„ ëŒë©°](https://lordofkangs.tistory.com/78) ë‚´ë¶€ êµ¬í˜„ì„ LinkedListì—ì„œ RBTë¡œ ë³€í™˜í•œë‹¤.

ì´ ë•Œ Node -> TreeNode ë¡œì˜ ë…¸ë“œ ë³€í™˜ ì˜¤ë²„í—¤ë“œê°€ ìˆìœ¼ë©° [JEP 180](https://bugs.openjdk.org/browse/JDK-8046170)ì„ ì°¸ì¡°í•˜ë©´, í•´ë‹¹ ì˜¤ë²„í—¤ë“œëŠ” ë©”ëª¨ë¦¬ íš¨ìœ¨ trade-off ì¸¡ë©´ì—ì„œ ê°ìˆ˜í•œ ê²ƒì„ì„ ì•Œ ìˆ˜ ìˆë‹¤.

~~*ìë°”ê°€ ì–¸ì œë¶€í„° íš¨ìœ¨ì„± ì‹ ê²½ì¼ë‹¤ã„±..*~~ (ê²€ì—´ì‚­ì œ)

C++ì€ ë‚´ë¶€ êµ¬í˜„ì´ ë””í´íŠ¸ RBTì´ë©° key ê¸°ì¤€ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬ ë³´ì¥ì„ì„ ìƒê°í• ë•Œ, ìë°”ì™€ì˜ ì°¨ì´ì ì´ ê½¤ë‚˜ í¥ë¯¸ë¡­ë‹¤.

<br />

#### ê·¸ë˜ì„œ ì‚¬ì‹¤ O(1) guarantee accessê°€ ì•„ë‹˜

ì¼ë°˜ì ìœ¼ë¡œ í•´ì‹œë§µì€ accessê°€ $O(1)$ì´ë¼ê³  ì•Œë ¤ì§€ë‚˜ ì´ëŠ” í•´ì‹œ ì¶©ëŒì´ ë°œìƒí•˜ì§€ ì•Šì€ ê²½ìš°ì´ë‹¤.

ì—„ë°€íˆ ë”°ì§€ë©´ ìµœì•…ì˜ ìƒí™©ì€ $O(n)$ ë˜ëŠ” $O(log\,n)$ì´ë‹¤.

ìë°” ê¸°ì¤€, í•´ì‹œ ì¶©ëŒì´ 7ë²ˆê¹Œì§€ ë°œìƒí•˜ë©´ LinkedList worst accessì˜ $O(n)$ì„ ë”°ë¥´ê²Œ ë˜ê³ 

8ë²ˆ ì¶©ëŒë¶€í„° RBTë¡œ ë³€í™˜ë˜ì–´ BST worst accessì˜ $O(log\,n)$ì„ ë”°ë¥´ê²Œ ëœë‹¤.

í•˜ì§€ë§Œ ì—„ë°€íˆ ë”°ì¡Œì„ ë•Œ ê·¸ë ‡ë‹¤ëŠ”ê±°ì§€, **ì›¬ë§Œí•˜ë©´ O(1)ì´ê¸° ë•Œë¬¸ì— í¬ê²Œ ê±±ì •í•  í•„ìš”ëŠ” ì—†ë‹¤.**

<br />

#### ğŸ“š ë” ì½ì–´ë³¼ê±°ë¦¬

- [DBMSì—ì„œ ì‚¬ìš©í•˜ëŠ” í•´ì‹œ í…Œì´ë¸”](https://code-run.tistory.com/26)
- [Perfect Hash Function](https://upcurvewave.tistory.com/730)
    - ì‚½ì…/ì‚­ì œê°€ ë¶ˆê°€í•œê²Œ í ì´ì§€ë§Œ ì»´íŒŒì¼ëŸ¬ ì˜ˆì•½ì–´ ì„¸íŠ¸ ë“± ì •ì  ë°ì´í„° ëŒ€ìƒìœ¼ë¡  í›Œë¥­í•˜ë‹¤.

<br />

### ë©”ëª¨

- ë³µìŠµí•˜ë©´ ì¢‹ì„ ë¬¸ì œ ìˆ˜ì¤€ì´ ì•„ë‹ˆë¼ ë³µìŠµ ì•ˆí•˜ë©´ í°ì¼ë‚˜ëŠ” ë¬¸ì œì´ë‹¤.
- head ë°˜í™˜ ë©”ì†Œë“œ ì—†ì–´ì„œ `entrySet().iterator().next()`ë¡œ ì ‘ê·¼í•´ì•¼í•œë‹¤ë‹ˆ.. ã…œã…œ