---
title: '3335 - Total Characters in String After Transformations I'
eng_title: '3335 - Total Characters in String After Transformations I'
image: https://til.qriosity.dev/img/m_banner_background.jpg
sidebar_label: '3335 - Total Characters in String After Transformations I'
sidebar_position: 3335
created_date: 2025-05-13
---

# 3335 - Total Characters in String After Transformations I

:::info

- **ë¬¸ì œ ë³´ê¸°**: [3335 - Total Characters in String After Transformations I](https://leetcode.com/problems/total-characters-in-string-after-transformations-i)
- **ì†Œìš” ì‹œê°„**: 41ë¶„ 57ì´ˆ
- **í’€ì´ ì–¸ì–´**: `java`
- **ì²´ê° ë‚œì´ë„**: 3ï¸âƒ£
- **ë¦¬ë·° íšŸìˆ˜**: âœ…

:::

<br />

### í’€ì´ í‚¤ì›Œë“œ

<details>
<summary>ìŠ¤í¬ì£¼ì˜</summary>

`DP`

</details>

<br />

### í’€ì´ ì½”ë“œ

:::info

- **ë©”ëª¨ë¦¬**: 45500 KB
- **ì‹œê°„**: 97 ms

:::

```java
class Solution {
    final int MOD = 1_000_000_007;

    public int lengthAfterTransformations(String s, int t) {
        int[] dp = new int[26];
        int[] nxt = new int[26];

        // init: if t == 0 then length = 1
        for (int ch = 0; ch < 26; ++ch) dp[ch] = 1;

        while (t-- > 0) {
            for (int ch = 0; ch < 26; ++ch) {
                if (ch == 25) { // cnt('z') <- cnt('a') + cnt('b')
                    nxt[ch] = (dp[0] + dp[1]) % MOD;
                } else {
                    nxt[ch] = dp[ch+1];
                }
            }

            int[] tmp = dp;
            dp = nxt;
            nxt = tmp;
        }

        long ans = 0;
        for (char ch : s.toCharArray()) {
            ans = (ans + dp[ch-'a']) % MOD;
        }

        return (int) ans;
    }
}
```

<br />

### í’€ì´ í•´ì„¤

zë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ì•ŒíŒŒë²³ì€ +1ì”© ê°’ì´ ë³€ê²½ë˜ê³  (ex. a -> b, x -> y)

zëŠ” abë¡œ ë³€ê²½ëœë‹¤ëŠ” ì¡°ê±´ í•˜ì—, ì£¼ì–´ì§„ ë¬¸ìì—´ì„ të§Œí¼ ë³€ê²½í•´ì„œ ê·¸ ê¸¸ì´ë¥¼ êµ¬í•˜ëŠ” ë¬¸ì œì´ë‹¤.

ê¸¸ì´ í™•ì¥ ì¡°ê±´ì´ ë™ì ì´ë¼ì„œ íŠ¹ì • ê³µì‹ìœ¼ë¡œ ë„ì¶œí•˜ê¸° ì–´ë µë‹¤.

<br />

:::caution

### ì‘ ì•„ë‹ˆì•¼

ë‹¤ìŒì˜ ë‚´ìš©ë“¤ì€ ì˜¤ë‹µì—ì„œ ì •ë‹µê¹Œì§€ì˜ ê³¼ì •ì„ ë‹¤ë£¨ê³  ìˆë‹¤. (ì¬ì‹¤ìˆ˜ ë°©ì§€ ëª©ì )

:::

### âŒ ì´ì§„ í™•ì¥ -> WA

a ~ zê¹Œì§€ëŠ” ê¸€ììˆ˜ ë³€ë™ ì—†ì´ ë‚´ìš©ë§Œ ë°”ë€Œê³ 

tì˜ 26ì£¼ê¸° ì‹œì ì—ì„œë§Œ z -> abë¡œ ê¸€ììˆ˜ê°€ 2ë°° í™•ì¥ë˜ëŠ” ì ì„ ê³ ë ¤í•´ì„œ ì´ì§„ í™•ì¥ì¸ê°€ ì‹¶ì—ˆë‹¤.

ë”°ë¼ì„œ sì˜ í•œ ê¸€ìì”© ìˆœíšŒí•˜ë©´ì„œ í•´ë‹¹ ê¸€ìê°€ t ì´í›„ì— ì–¼ë§ˆë‚˜ í™•ì¥ë ì§€ë¥¼ ê³µì‹í™”í–ˆê³ 

`1 << n/26` ìœ¼ë¡œ êµ¬í•´ì§„ë‹¤ê³  ìƒê°í–ˆë‹¤. (ë‹¨, n = t + 'a'ë¡œë¶€í„°ì˜ ì˜¤í”„ì…‹)

<br />

í•˜ì§€ë§Œ ì˜ ìƒê°í•´ë³´ë©´ z -> aa ê°€ ì•„ë‹ˆê³  z -> abë¼ì„œ í™•ì¥ ì£¼ê¸°ê°€ ì¼ì •ì¹˜ ì•Šë‹¤.

zëŠ” +26 ì‹œì ì—ì„œ ab -> zabë¡œ bë§Œ í™•ì¥ë˜ì–´ 2ê¸€ìê°€ ì•„ë‹Œ 3ê¸€ìê°€ ë˜ê³ 

+27ì´ ë˜ì–´ì•¼ ab -> abbcë¡œ 4ê¸€ìê°€ ëœë‹¤. í•˜ì§€ë§Œ ì´ë ‡ê²Œ ë˜ ì„œë¡œ ë‹¤ë¥¸ ì˜¤í”„ì…‹ë•Œë¬¸ì— ë‹¤ìŒ ì£¼ê¸°ì—ë„ í™•ì¥ íƒ€ì´ë°ì´ ê¸€ìë§ˆë‹¤ ì œê°ê°ì´ ëœë‹¤.

ë§ˆì°¬ê°€ì§€ë¡œ ê¸°ì¡´ ë„ì¶œëœ ê³µì‹ìœ¼ë¡œ ê³„ì‚°í•˜ë©´ yëŠ” 2ë°”í€´ì§¸ì¸ +52 ì‹œì ë¶€í„° ì˜¤ë‹µì´ ë‚˜ì˜´ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ğŸ‘‰ **ê²°ë¡ ì ìœ¼ë¡œ, í•´ë‹¹ ì ‘ê·¼ì€ í‹€ë ¸ë‹¤.**

<details>
<summary>WA ì½”ë“œ</summary>

```java
import java.math.*;

class Solution {
    public int lengthAfterTransformations(String s, int t) {
        // a(1) -> ab(2) -> abbc(4) -> abbcbccd(8)
        // 2^0  ->  2^1  ->   2^2   ->    2^3
        //  0   ->   26  ->   26*2  ->   26*3
        final int MOD = 1_000_000_007;
        long sum = 0;
        for (char ch : s.toCharArray()) {
            int offset = ch - 'a'; // offset: required t to transform 'a' into ch
            int n = t + offset;
            int res = BigInteger.ONE.shiftLeft(n/26).mod(BigInteger.valueOf(MOD)).intValue();
            sum += res % MOD;
        }

        return (int) sum;
    }
}
```

</details>

```text title="WA TC"
"jqktcurgdvlibczdsvnsg"
7517
```

<br />

### âŒ í•˜í–¥ì‹ DP -> TLE1

ê³µì‹í™”ê°€ ì•ˆë˜ëŠ”ë°ë‹¤ ìºì‹±ì˜ ì—¬ì§€ê°€ ìˆìœ¼ë‹ˆ ì°¨ì„ ì±…ì¸ DPë¡œ ì ‘ê·¼í–ˆë‹¤.

ë©”ëª¨ì´ì œì´ì…˜ìœ¼ë¡œ ê° ì•ŒíŒŒë²³ì˜ të³„ ê¸¸ì´ë¥¼ ìºì‹±í–ˆëŠ”ë° í•¨ìˆ˜ í˜¸ì¶œ ì˜¤ë²„í—¤ë“œ ë•Œë¬¸ì¸ì§€ ì œì•½ì¡°ê±´ì˜ ìƒí•œì—ì„œ TLEê°€ í„°ì¡Œë‹¤.

<details>
<summary>TLE1 ì½”ë“œ</summary>

```java
class Solution {
    final int MOD = 1_000_000_007;
    int memo[][] = new int[26][100_001];

    public long dp(int ch, int t) {
        if (t == 0) return 1;
        if (memo[ch][t] != 0) return memo[ch][t];

        long res = 0L;
        if (ch == 25) res = (dp(0, t-1) + dp(1, t-1)) % MOD;
        else res = dp(ch+1, t-1) % MOD;

        return memo[ch][t] = (int) res;
    }

    public int lengthAfterTransformations(String s, int t) {
        long ans = 0L;
        for (char ch : s.toCharArray()) ans = (ans + dp(ch-'a', t)) % MOD;
        return (int) ans;
    }
}
```

</details>

```text title="TLE1 TC"
{aë§Œìœ¼ë¡œ êµ¬ì„±ëœ ê¸¸ì´ 10ë§Œì˜ ë¬¸ìì—´}
100000
```

<br />

### âŒ ìƒí–¥ì‹ DP -> TLE2

í•˜í–¥ì‹ìœ¼ë¡œ TLEë¥¼ ë°›ì•„ì„œ í˜¸ì¶œ ì˜¤ë²„í—¤ë“œê°€ ì—†ëŠ” ìƒí–¥ì‹ìœ¼ë¡œ ê³ ì³¤ëŠ”ë° ì—­ì‹œë‚˜ TLEì˜€ë‹¤.

*ì™œì§€??* í•˜ê³  ì •ë³´ë¥¼ ì°¾ì•„ë³´ë‹ˆ ë©”ëª¨ì´ì œì´ì…˜ì„ 2ì°¨ì›ìœ¼ë¡œ ì •ì˜í•œê²Œ ì›ì¸ì´ì—ˆë‹¤.

C/C++ì—ì„  ê·¸ëƒ¥ ìŠ¤íƒ ë©”ëª¨ë¦¬ì— í• ë‹¹í•˜ë©´ ë‹¤ ì¶©ë¶„íˆ ë¹ ë¥¸ë°

ìë°”ëŠ” 2ì°¨ì› ë°°ì—´ì´ **ê°ì²´ë°°ì—´ + ë‚´ë¶€ë°°ì—´** êµ¬ì¡°ì´ê³ , í™ ë©”ëª¨ë¦¬ì— ìœ„ì¹˜í•´ìˆì–´ ë” ëŠë¦¬ë‹¤.

ê·¸ë¦¬ê³  **ë©”ëª¨ë¦¬ ì ‘ê·¼ ì§€ì—­ì„±**ì˜ ê´€ì ì—ì„œë„ CPU caching + prefetchê°€ ë“¤ì–´ê°€ëŠ” 1DëŠ” 2Dì™€ ì•„ì£¼ í° í¼í¬ë¨¼ìŠ¤ ì°¨ì´ë¥¼ ë‚¼ ìˆ˜ ìˆë‹¤.

---

<p>ê·¸ëŸ¬ë¯€ë¡œ ìë°”ì—ì„œì˜ dp ì—°ì‚°ì€ <span style={{fontSize: '32px'}}><br />
<b>â­2D ë°°ì—´ì„ nê°œì˜ 1D ë°°ì—´ë¡œ ì¹˜í™˜â­</b></span>í•˜ì—¬</p>

ê° ë°°ì—´ì„ ì£¼ì†Œë¡œ ìŠ¤ì™‘í•´ì„œ ì“°ëŠ”ê²Œ í›¨ ë¹ ë¥´ë‹¤ëŠ” ê²°ë¡ .

---

<p style={{fontSize: '20px'}}><b>í•˜ì§€ë§Œ 1Dë‚˜ 2Dë‚˜ ì‹œê°„ë³µì¡ë„ëŠ” ë™ì¼í•˜ë‹¤.</b></p>

ë‘˜ ë‹¤ $O(26 \times t \times |s|)$ ì´ë‹¤. ğŸ˜¥

ë³´í†µ ì•Œê³ ë¦¬ì¦˜ ìì²´ì˜ ë³µì¡ë„ ì„ ì—ì„œ ì •ë‹µ ì»·ì„ ë‚´ëŠ”ë° ë©”ëª¨ë¦¬ ë³‘ëª© ì°¨ì´ë¡œ ì •ë‹µì´ ê°ˆë¦¬ëŠ”ê²Œ ë‹¤ì†Œ ì­ìŠ¤ëŸ½ê¸´ í•˜ë‹¤.

<details>
<summary>TLE2 ì½”ë“œ</summary>

```java
class Solution {
    final int MOD = 1_000_000_007;
    long dp[][] = new long[26][100_001];

    public int lengthAfterTransformations(String s, int t) {
        for (int i = 0; i < 26; ++i) dp[i][0] = 1;
        for (int j = 1; j < t+1; ++j) {
            for (int i = 0; i < 26; ++i) {
                if (i == 25) dp[i][j] = (dp[0][j-1] + dp[1][j-1]) % MOD;
                else dp[i][j] = dp[i+1][j-1];
            }
        }

        long ans = 0L;
        for (char ch : s.toCharArray()) ans = (ans + dp[ch-'a'][t]) % MOD;
        return (int) ans;
    }
}
```

</details>

```text title="TLE2 TC"
"rssjmowborzlmeqqqobyqcejqloqicrzuioahtgvdfptpdiofqnnximowhqovyqxhclnokkvqjwsrftkyerwnbecbmanninbgwwkglezhocqjwgzlqddzojmiohtkqdrmjiowbfvtzrqtzmkcfmivdiqqqueacibannstgtvqsijncxchwbfdvmqlzfinhijodevmabkcubwzwhyytfbveefesyayesszwgmzyurpzyjohvywngbtokwequjxcjyoeyoarnlopivfuenhzounucgeuawoxgqvixmlpjmqbvmtunksququawvbmwzyftijgkmkzxhqjleoblkyfdcycsnzvriygckuaxwendcmgfbrnggsozmhxmdpiuuopgfnxekoyfnlhzctdkfdwzbrdjxrvqqnasaqvtdrcqcgfdmpxakujbsrmcintncablupxhtzsqivaetfcufmxsmugzzmkhlachvgemgwrrhevzzpsqjvhgyalfpnxbfxhyglxfhfvbpbypyourftcowtnsykcadbqufdzihzsjylccmjohjajyejuwnosiovynbosxewxhksoszumnfmapjuvkmenmtanjbrldmfrlvoofdtluktbwwzavxxsbcrsvpbzbpqdutasuiowhmtgowvghndncmhrusxgfrjrcrqwrvtlvpxdfydeqyzowxxgrpgrzrotpaxhcrrpoeuomoxklvgdfdnhbgwpolpwfuscyvlkpbamwcbmqoofplzevjkspktcjanfglhygtfbqxagnqtpgfhpkqgnywzvckdbbyfmyklxpwqsslctqerxgxwumoxvetprjrmttxdjyarbjucsaanhmxknqlnanqzmzearndgslboqubuxmvhwcrnqhuoiebalcsaektkbzwztkaluhecfpwvzdzjyfzevxroclrdqwlxjxuadsntsbidptxrlwjyzubzflxllsntjcbxexciujwcqbljistpyaepabpophyhxhzfgbavxwsaodglknjgnbqspreylgaiziqzhyeafdubhvtfgflkcgwhsocjhywnqjvqqwxdoymzfskibejnwarqpjyootzvqfgqzavutozkzebfvbagtsgpkreraifogvyaxjrukcxnwurpnpmmyqcsegkiakepsvxgpillpzsuonmixasdjbpzmblkgjaiwmlmqoxaameqrcawskfqsjccxeqlwuxczhtxwgcojiofqkttffaflpuihwpg"
3434
```

<br />

### ë©”ëª¨

- ì´ ë¬¸ì œë„ ë¦¿ì½” ëŒ“ê¸€ì´ ì›ƒê¹€ ã…‹ã…‹
- WA -> TLE1 -> TLE2 ê±°ì¹˜ë©´ì„œ ê·¸ë¼ë°ì´ì…˜ìœ¼ë¡œ í˜ˆì••ì´ ì˜¬ëë‹¤.
    - C#ë„ ì˜ë§Œ 2Dë¡œ í†µê³¼í•˜ëŠ”ë° ì–¸ì–´ ìŠ¤í™ì—ì„œ ì´ë ‡ê²Œ êµ¬ë¦°ê±° ì²˜ìŒ ë´„;
- ë” deepí•˜ê²Œ ë³´ë ¤ë©´ JIT ë””ë²„ê¹… (2D êµ¬ì¡°ê°€ JIT ìµœì í™”ë¥¼ ì–´ë µê²Œ í•œë‹¤ê³  í•¨) + JMH ë²¤ì¹˜ë§ˆí‚¹ ë¹„êµê¹Œì§€ ë“¤ì–´ê°€ì•¼ í•œë‹¤.
- `t` ë²”ìœ„ë•Œë¬¸ì— DP ë°°ì œí•´ë†“ê³  ë´¤ëŠ”ë° ë‹¤ì‹œ ìƒê°í•˜ë‹ˆ $10^6$ ë¯¸ë§Œì´ë‹ˆê¹Œ ê´œì°®ì•˜ë˜ ë“¯?
