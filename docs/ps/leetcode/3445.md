---
title: '3445 - Maximum Difference Between Even and Odd Frequency II'
eng_title: '3445 - Maximum Difference Between Even and Odd Frequency II'
image: https://til.qriosity.dev/img/m_banner_background.jpg
sidebar_label: '3445 - Maximum Difference Between Even and Odd Frequency II'
sidebar_position: 3445
created_date: 2025-06-11
---

# 3445 - Maximum Difference Between Even and Odd Frequency II

:::info

- **ë¬¸ì œ ë³´ê¸°**: [3445 - Maximum Difference Between Even and Odd Frequency II](https://leetcode.com/problems/maximum-difference-between-even-and-odd-frequency-ii)
- **ì†Œìš” ì‹œê°„**: ğŸ’¥**1ì‹œê°„ ì´ˆê³¼**
- **í’€ì´ ì–¸ì–´**: `java`
- **ì²´ê° ë‚œì´ë„**: 4ï¸âƒ£~5ï¸âƒ£
- **ë¦¬ë·° íšŸìˆ˜**: âœ…

:::

<br />

### í’€ì´ í‚¤ì›Œë“œ

<details>
<summary>ìŠ¤í¬ì£¼ì˜</summary>

`ëˆ„ì í•©`

</details>

<br />

### í’€ì´ ì½”ë“œ

:::info

- **ë©”ëª¨ë¦¬**: 45200 KB
- **ì‹œê°„**: 81 ms

:::

```java
class Solution {
    public int maxDifference(String s, int k) {
        final int n = s.length();
        int ans = Integer.MIN_VALUE;

        // ì„œë¡œ ë‹¤ë¥¸ ë¬¸ì ìŒ (a, b)ì— ëŒ€í•´ ëª¨ë‘ ì‹œë„
        for (char a = '0'; a <= '4'; ++a) {
            for (char b = '0'; b <= '4'; ++b) {
                if (a == b) continue;

                // --- per single (a, b) pair ---

                // mn[status]: í•´ë‹¹ ìƒíƒœì˜ (prev_a - prev_b) ìµœì†Ÿê°’ì„ ì €ì¥
                int[] mn = new int[4];
                Arrays.fill(mn, Integer.MAX_VALUE);

                // right í¬ì¸í„°ê¹Œì§€ì˜ a, b ë¬¸ì ê°œìˆ˜
                int cnt_a = 0, cnt_b = 0;
                // left í¬ì¸í„°ê¹Œì§€ì˜ a, b ë¬¸ì ê°œìˆ˜
                int prev_a = 0, prev_b = 0;
                int left = -1;

                // right í¬ì¸í„°ë¡œ ë¬¸ìì—´ ìˆœíšŒ
                for (int right = 0; right < n; ++right) {
                    // í˜„ì¬ ìœ„ì¹˜ì˜ ë¬¸ìê°€ a ë˜ëŠ” bì¼ ê²½ìš° êµ¬ê°„í•© ì—…ë°ì´íŠ¸
                    cnt_a += (s.charAt(right) == a) ? 1 : 0;
                    cnt_b += (s.charAt(right) == b) ? 1 : 0;

                    // ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ë™ì•ˆ left í¬ì¸í„°ë¥¼ ì´ë™ì‹œí‚¤ë©° mn ë°°ì—´ ì—…ë°ì´íŠ¸
                    // ì¡°ê±´:
                    //  - êµ¬ê°„ ê¸¸ì´ê°€ ìµœì†Œ k ì´ìƒ
                    //  - b ë¬¸ìê°€ í˜„ì¬ êµ¬ê°„ ë‚´ì— ìµœì†Œ 2ê°œ ì´ìƒ (0 ë˜ëŠ” 1ì€ ì•ˆë¨)
                    while (right-left >= k && cnt_b-prev_b >= 2) {
                        // í˜„ì¬ left í¬ì¸í„°ê°€ ê°€ë¦¬í‚¤ëŠ” êµ¬ê°„ì˜ ìƒíƒœë¥¼ ê°€ì ¸ì˜´
                        int left_status = getStatus(prev_a, prev_b);

                        // í•´ë‹¹ ìƒíƒœì—ì„œì˜ (prev_a - prev_b) ìµœì†Ÿê°’ì„ mn ë°°ì—´ì— ì €ì¥
                        mn[left_status] = Math.min(mn[left_status], prev_a-prev_b);

                        // left í¬ì¸í„°ë¥¼ í•œ ì¹¸ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™ì‹œí‚¤ê³  êµ¬ê°„í•© ì—…ë°ì´íŠ¸
                        ++left;
                        prev_a += (s.charAt(left) == a) ? 1 : 0;
                        prev_b += (s.charAt(left) == b) ? 1 : 0;
                    }

                    // -- í˜„ì¬ì˜ right í¬ì¸í„° ê¸°ì¤€ì—ì„œ ê°€ëŠ¥í•œ ìµœëŒ€ ê°’ì„ ê³„ì‚° --

                    // 1. í˜„ì¬ prefixì˜ ìƒíƒœ (ì§/í™€ ì—¬ë¶€)ë¥¼ ê°€ì ¸ì˜´
                    int right_status = getStatus(cnt_a, cnt_b);

                    // 2. ì •ë‹µì´ ë  substringì˜ ìƒíƒœëŠ” (a: í™€ìˆ˜, b: ì§ìˆ˜) = 0b10 ì´ë¯€ë¡œ,
                    // prefix ìƒíƒœ ê°„ XORì„ í†µí•´ í•„ìš”í•œ ì´ì „ ìƒíƒœë¥¼ ê³„ì‚°
                    int required_status = right_status ^ 0b10;

                    // 3. í•´ë‹¹ ìƒíƒœì˜ prefixê°€ ì´ì „ì— ì¡´ì¬í–ˆë‹¤ë©´,
                    if (mn[required_status] != Integer.MAX_VALUE) {
                        // í˜„ì¬(cnt_a - cnt_b)ì™€ í•´ë‹¹ ìƒíƒœì˜ ìµœì†Œ(prev_a - prev_b)ë¥¼ ì´ìš©í•´ ìµœëŒ€ ì°¨ì´ë¥¼ ê³„ì‚°
                        ans = Math.max(ans, cnt_a-cnt_b-mn[required_status]);
                    }
                } // end of s iteration

            }
        }
        return ans;
    }

    private int getStatus(int cnt_a, int cnt_b) {
        // cnt_aì™€ cnt_bì˜ í™€ì§ ì—¬ë¶€ë¥¼ 0bxxë¡œ statusí™” í•˜ì—¬ ë°˜í™˜
        return ((cnt_a & 1) << 1) | (cnt_b & 1);
    }
}
```

<br />

### í’€ì´ í•´ì„¤

ë¬¸ìì—´ sì— ëŒ€í•´ ê¸¸ì´ k ì´ìƒì˜ substring ì¤‘ `freq[a] - freq[b]`ì˜ ìµœëŒ€ê°’ì„ êµ¬í•˜ëŠ” ë¬¸ì œì´ë‹¤.

freq[a]ëŠ” í™€ìˆ˜ ë¹ˆë„, freq[b]ëŠ” ì§ìˆ˜ ë¹ˆë„ì´ë‹¤.

```java
// ì„œë¡œ ë‹¤ë¥¸ ë¬¸ì ìŒ (a, b)ì— ëŒ€í•´ ëª¨ë‘ ì‹œë„
for (char a = '0'; a <= '4'; ++a) {
    for (char b = '0'; b <= '4'; ++b) {
        if (a == b) continue;
```

ë¬¸ìê°€ 0, 1, 2, 3, 4ì˜ 5ê°€ì§€ë¡œ êµ¬ì„±ë˜ì–´ìˆì–´ aì™€ bê°€ ë¬´ìŠ¨ ë¬¸ìê°€ ë  ì§€ ëª¨ë¥´ê¸°ì—

ì¼ë‹¨ ìµœì™¸ê°ì—ì„œ ëª¨ë“  ë¬¸ìì— ëŒ€í•œ ë¸Œë£¨íŠ¸í¬ìŠ¤ë¥¼ ëŒë ¤ì£¼ê³ 

ë‹¤ë§Œ a == bì¼ ê²½ìš°ë§Œ ì³ë‚¸ë‹¤.

```
0023100303124320423
  ^    ^
  l    r
```

ê·¸ ë‹¤ìŒì€, ì´ëŸ°ì‹ìœ¼ë¡œ l~r ê±°ë¦¬ê°€ k ì´ìƒì´ë©´ì„œ bë¬¸ìê°€ ìµœì†Œ 2ê°œ ì´ìƒ í™•ë³´ë  ë•Œì˜ êµ¬ê°„ë“¤ì´ ìˆëŠ”ë°

ì´ êµ¬ê°„ì˜ `freq[a] - freq[b]`ë¥¼ naiveí•˜ê²Œ í‘œí˜„í•˜ìë©´<br />
(rê¹Œì§€ì˜ `freq[a] - freq[b]`) - (lê¹Œì§€ì˜ `freq[a] - freq[b]`)ì´ë‹¤.

<br />

#### ğŸ“Œ ì¡°ê±´ì„ ë¹„íŠ¸ë§ˆìŠ¤í‚¹ìœ¼ë¡œ í‘œí˜„í•˜ê¸°

ì—¬ê¸°ê¹Œì§€ êµ¬í–ˆìœ¼ë©´ ë‹¤ìŒì€ freq[a]ëŠ” í™€ìˆ˜, freq[b]ëŠ” ì§ìˆ˜ë¼ëŠ” ì¡°ê±´ì„ ë§Œì¡±í•´ì•¼ í•œë‹¤.

ë”°ë¼ì„œ í•´ë‹¹ ì¡°ê±´ì„ status 0b10ìœ¼ë¡œ í‘œí˜„í•œë‹¤. $2^1$ì˜ ìë¦¬ê°€ aê³  $2^0$ì˜ ìë¦¬ê°€ bì„.

rstatusì— XOR 0b10 í•˜ì—¬ lstatusë¥¼ êµ¬í•˜ë©´,

```java
while (right-left >= k && cnt_b-prev_b >= 2) {
    // í˜„ì¬ left í¬ì¸í„°ê°€ ê°€ë¦¬í‚¤ëŠ” êµ¬ê°„ì˜ ìƒíƒœë¥¼ ê°€ì ¸ì˜´
    int left_status = getStatus(prev_a, prev_b);

    // í•´ë‹¹ ìƒíƒœì—ì„œì˜ (prev_a - prev_b) ìµœì†Ÿê°’ì„ mn ë°°ì—´ì— ì €ì¥
    mn[left_status] = Math.min(mn[left_status], prev_a-prev_b);

    // left í¬ì¸í„°ë¥¼ í•œ ì¹¸ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™ì‹œí‚¤ê³  êµ¬ê°„í•© ì—…ë°ì´íŠ¸
    ++left;
    prev_a += (s.charAt(left) == a) ? 1 : 0;
    prev_b += (s.charAt(left) == b) ? 1 : 0;
}
```

ì—¬ê¸°ì„œ êµ¬í•´ë†¨ë˜ mn ë°°ì—´ì„ í†µí•´ lstatusì— ëŒ€í•œ ìµœì†Œ `freq[a] - freq[b]`ë¥¼ $O(1)$ìœ¼ë¡œ êµ¬í•  ìˆ˜ ìˆê³ 

ì´ëŠ” ê³§ (rê¹Œì§€ì˜ `freq[a] - freq[b]`) - (lê¹Œì§€ì˜ `freq[a] - freq[b]`) ìˆ˜ì‹ì—ì„œ

(lê¹Œì§€ì˜ `freq[a] - freq[b]`)ì˜ ìµœì†Œê°’ì„ êµ¬í•œ ê²ƒì´ê¸°ì—

```java
// 3. í•´ë‹¹ ìƒíƒœì˜ prefixê°€ ì´ì „ì— ì¡´ì¬í–ˆë‹¤ë©´,
if (mn[required_status] != Integer.MAX_VALUE) {
    // í˜„ì¬(cnt_a - cnt_b)ì™€ í•´ë‹¹ ìƒíƒœì˜ ìµœì†Œ(prev_a - prev_b)ë¥¼ ì´ìš©í•´ ìµœëŒ€ ì°¨ì´ë¥¼ ê³„ì‚°
    ans = Math.max(ans, cnt_a-cnt_b-mn[required_status]);
}
```

ìƒë‹¨ì˜ ë°©ì‹ìœ¼ë¡œ ansë¥¼ ì—…ë°ì´íŠ¸í•˜ë©° l~r êµ¬ê°„ì˜ ìµœëŒ€ `freq[a] - freq[b]` ê°’ì„ êµ¬í•  ìˆ˜ ìˆë‹¤.

<br />

### ë©”ëª¨

- ë‚œì´ë„ ì—ë°”
    - ì½”í…Œ ìˆ˜ì¤€ ì•„ë‹˜