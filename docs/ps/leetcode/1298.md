---
title: '1298 - Maximum Candies You Can Get from Boxes'
eng_title: '1298 - Maximum Candies You Can Get from Boxes'
image: https://til.qriosity.dev/img/m_banner_background.jpg
sidebar_label: '1298 - Maximum Candies You Can Get from Boxes'
sidebar_position: 1298
created_date: 2025-06-03
---

# 1298 - Maximum Candies You Can Get from Boxes

:::info

- **ë¬¸ì œ ë³´ê¸°**: [1298 - Maximum Candies You Can Get from Boxes](https://leetcode.com/problems/maximum-candies-you-can-get-from-boxes)
- **ì†Œìš” ì‹œê°„**: 35ë¶„ 6ì´ˆ
- **í’€ì´ ì–¸ì–´**: `java`
- **ì²´ê° ë‚œì´ë„**: 3ï¸âƒ£
- **ë¦¬ë·° íšŸìˆ˜**: âœ…

:::

<br />

### í’€ì´ í‚¤ì›Œë“œ

<details>
<summary>ìŠ¤í¬ì£¼ì˜</summary>

`bfs` `êµ¬í˜„`

</details>

<br />

### í’€ì´ ì½”ë“œ

:::info

- **ë©”ëª¨ë¦¬**: 57020 KB
- **ì‹œê°„**: 3 ms

:::

```java
class Solution {
    public int maxCandies(int[] status, int[] candies, int[][] keys, int[][] containedBoxes, int[] initialBoxes) {
        boolean[] visited = new boolean[status.length];
        boolean[] haveKey = new boolean[status.length];

        // init
        Deque<Integer> q = new ArrayDeque<>();
        for (int i : initialBoxes) {
            q.add(i);
            visited[i] = true;
            for (int j : keys[i]) haveKey[j] = true;
        }
        
        // break condition: found no key & box == hopeless
        boolean hope = true;
        int ans = 0;
        while (hope) {
            int sz = q.size();
            hope = false;
            while (sz-- > 0) {
                int i = q.poll();
                if (status[i] == 1 || (status[i] == 0 && haveKey[i])) { // 1. opened or can open
                    for (int k : keys[i]) {
                        if (haveKey[k]) continue; // useless key
                        haveKey[k] = true; // get keys
                        hope = true;
                    }
                    for (int b : containedBoxes[i]) {
                        if (visited[b]) continue;
                        q.add(b); // get boxes
                        visited[b] = true;
                        hope = true;
                    }
                    ans += candies[i];
                }
                else { // 2. closed or can't open
                    q.add(i);
                }
            }
        }

        return ans;
    }
}
```

<br />

### í’€ì´ í•´ì„¤

ì§€ë¬¸ì˜ ë‚´ìš©ì— ë”°ë¼ ê·¸ëŒ€ë¡œ ì¡°ê±´ì„ êµ¬í˜„í•´ì„œ bfsë¡œ í’€ì´í•˜ëŠ” ë¬¸ì œì´ë‹¤.

<br />

#### ğŸ“¦ ë³´ìœ  ì¤‘ì¸ ë°•ìŠ¤ëŠ” íë¡œ ì €ì¥í•˜ê¸°

```java
Deque<Integer> q = new ArrayDeque<>();
for (int i : initialBoxes) {
    q.add(i);
    visited[i] = true;
    for (int j : keys[i]) haveKey[j] = true;
}
```

`initialBoxes`ì— ì£¼ì–´ì§„ ì‹œì‘ ë°•ìŠ¤ë“¤ì„ ì „ë¶€ íì— ë„£ê³ , ì¤‘ë³µ ì‚½ì…í•˜ì§€ ì•Šë„ë¡ ë°©ë¬¸ ì²˜ë¦¬í•œë‹¤.

ê·¸ë¦¬ê³  ë³´ìœ ì¤‘ì¸ ë°•ìŠ¤ì— ëŒ€í•œ ëª¨ë“  keyë“¤ë„ ë³´ìœ  ì²˜ë¦¬í•œë‹¤.

`haveKey`ëŠ” ê·¸ëƒ¥ ì‰½ê²Œ ìƒê°í•´ì„œ keyì— ëŒ€í•œ boolean íƒ€ì… visitedì´ë‹¤.

ì´ê±¸ë¡œ `keys[i]`ì— ëŒ€í•œ ë°©ë¬¸ íŒë³„ë„ í•˜ê³  ë³´ìœ  íŒë³„ë„ í•œë‹¤.

keyë„ ë°©ë¬¸ ì²˜ë¦¬í•˜ëŠ” ì´ìœ ëŠ” ì´ë¯¸ ì˜ˆì „ì— 2ë²ˆ í‚¤ ì‚¬ìš©í–ˆì—ˆëŠ”ë° ë‹¤ë¥¸ ìƒìì—ì„œ ë˜ 2ë²ˆ í‚¤ ë‚˜ì™”ë‹¤ê³  í¬ë§ì´ ìƒê¸°ë©´ ì•ˆë˜ê¸° ë•Œë¬¸ì´ë‹¤.

<br />

#### "ì–¸ì œê¹Œì§€ í¬ë§ê³ ë¬¸ í• ê±´ë°"

```java
// break condition: found no key & box == hopeless
boolean hope = true;
int ans = 0;
while (hope) {
    int sz = q.size();
    hope = false;
    while (sz-- > 0) {
        ...
    }
```

ë¬¸ì œ í’€ì´ì— ê°€ì¥ ì‹œê°„ì„ íˆ¬ìí•œ ë¶€ë¶„ì¸ë°, bfsë¥¼ ëŒë¦¬ë‹¤ê°€ ì–´ëŠ ê¸°ì¤€ìœ¼ë¡œ whileì„ ë¹ ì ¸ë‚˜ì˜¬ì§€ ê³ ë¯¼ë˜ì—ˆë‹¤.

ì™œëƒí•˜ë©´ íì˜ ë°•ìŠ¤ë“¤ì„ ë‹¤ ìŠ¤ìº”í•´ì„œ keyë‚˜ containedBoxë¥¼ ì°¾ì•„ë³´ì•„ë„ **ì•„ë¬´ ì§„ì²™ì´ ì—†ì„ ë•Œ**

ì´ëŠ” ë”ì´ìƒì˜ íƒìƒ‰ì´ ì˜ë¯¸ì—†ì–´ whileë¬¸ì„ ì¢…ë£Œí•  íƒ€ì´ë°ì´ì§€ë§Œ,<br />
**ì—¬ì „íˆ íì—ëŠ” ë°•ìŠ¤ë“¤ì´ ë‚¨ì•„ìˆê¸° ë•Œë¬¸ì´ë‹¤.** (ì¦‰, `!q.isEmpty()` ì‚¬ìš© ë¶ˆê°€)

ë”°ë¼ì„œ íì˜ ë°•ìŠ¤ë“¤ì„ í•œì°¨ë¡€ ë‹¤ ìŠ¤ìº”í•˜ëŠ” ê²ƒì„ 1 waveë¡œ ê¸°ì¤€ì¡ì•„ waveë‹¹ í sizeë§Œí¼ ìˆœíšŒí–ˆê³ 

sizeë§Œí¼ ìˆœíšŒí•˜ëŠ”ë™ì•ˆ ì“¸ë§Œí•œ keyë‚˜ containedBoxë¥¼ ì°¾ì•˜ë‹¤ë©´ `hope`ë¥¼ trueë¡œ ì„¤ì •í•´ì„œ bfsë¼ëŠ” í¬ë§ê³ ë¬¸ì„ ê³„ì†í•˜ë„ë¡ ë¡œì§ì„ êµ¬ì„±í–ˆë‹¤.

<br />

### ë©”ëª¨

- whileë¬¸ êµ¬ì„±ë§Œ ì•½ê°„ì˜ ìƒê°ì´ í•„ìš”í•œ ë¶€ë¶„ì´ê³  ë‹¤ë¥¸ê±´ ë¬´ë‚œí•œ ë‚œì´ë„ì´ë‹¤.
- [NextLeet](https://nextleet.vercel.app/)ì˜ ì¡´ì¬ë¥¼ ì•Œê²Œë˜ì—ˆë‹¤. ì—¬í–‰ ê°€ê¸° ì „ ë¯¸ë¦¬ í’€ì–´ë‘ë©´ ì¢‹ì„ë“¯?